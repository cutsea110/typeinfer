\documentclass[b5paper]{jsbook}

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{listings}
\usepackage{theorem}
\usepackage{proof}
\usepackage[dvips]{hyperref}

\newlength{\lengthwithlength}
\newcommand{\bnfvert}{\settowidth{\lengthwithlength}{::=}\mathrel{\makebox[\lengthwithlength][c]{$|$}}}
\newcommand{\bnfcce}{\mathrel{::=}}

\newcommand{\alphaeq}{=_\alpha}
\newcommand{\betared}{\to_\beta}
\newcommand{\infere}[3]{\infer[\textsc{[#1]}]{#2}{#3}}

{
\theorembodyfont{\upshape}
\newtheorem{exercise}{練習問題}[chapter]
\newtheorem{answer}{回答}[chapter]
\theoremstyle{break}
\newtheorem{definition}{定義}[chapter]
}

\lstset{
  basicstyle=\small\tt,
  keywordstyle=\bf,
  identifierstyle=,
  commentstyle=,
  stringstyle=,
  emphstyle=,
  language=[Objective]caml,
  frame=trbl,
  numbers=left,
  numberstyle=,
  frame=shadowbox,
  basewidth={0.54em, 0.45em},
  lineskip=-0.2zw
}

\renewcommand{\lstlistingname}{リスト}

\setcounter{tocdepth}{2}

\title{Algorithm $\mathcal W$ 入門}
\author{坂口和彦}

\begin{document}

\maketitle

\pagenumbering{roman}

\section*{前書き}

この本は、単純型付きラムダ計算からパラメトリック多相入りの型システム程度の範囲での型推論について、
体系的かつ理論と実装に一対一の対応が現れる形でまとめた本です。
最後まで読めば Hindley-Milner 型推論アルゴリズム(Algorithm $\mathcal W$)
の現実的な実装を理解できるということを目標としています。

型推論とは、静的型付きのプログラミング言語において、
そのプログラムから変数や式の型を推論する仕組みのことです。
Hindley-Milner の型推論アルゴリズムは、
多くのプログラミング言語処理系における型推論の基礎となっているアルゴリズムです。

そもそも、Hindley-Milner 型推論アルゴリズムを学ぶことにはどのような意味があるのでしょうか。
著者は、この問いに対する答えは2つあると考えています。

まず1つは、静的型付けの型推論を持つ関数型プログラミング言語処理系を作る上で、
避けては通れない道であるということです。
しかし、それだけの理由で型推論を学ぶ必要がある人はごく僅かしかいません。

もう1つの理由は、型推論の仕組みを知ることで、
型推論の機能を持つ言語処理系の型に関するメッセージが圧倒的に理解しやすくなるという点にあります。

OCaml や Haskell、その他類似の型推論機能を持つ言語を使っていて、
型エラーの意味する所が良く分からないということがあると思います。
そのエラーは、型推論の過程で整合性が取れないと分かった部分を示しているのです。
よって、型推論アルゴリズムを学ぶことで、
型エラーに対する理解がより一層深くなるのではないかと考えられます。
また、Haskell ではトップレベルの束縛に型を書くのが正しい習慣とされていますが、
それも型推論の仕組みを逆手に取り、分かりづらいエラーを抑制する意味があります。

このような理由から、静的型付けの関数型言語を使っているプログラマにとって、
型推論を学ぶことはとても大きな意味を持つと考えられます。

\section*{使用言語とライブラリ}

型推論の実装は関数型プログラミング言語 OCaml 3.12.0、
OCaml の標準ライブラリ、Jane Street's core によって記述されています。

\section*{対象読者について}

読者は関数型プログラミングや OCaml のエキスパートである必要はありませんが、
ある程度 Haskell や OCaml での関数型言語らしいプログラムの書き方を理解していることを前提としています。

\tableofcontents

\newpage

\pagenumbering{arabic}

\chapter{$\lambda$ 計算入門}

\input{lambda}

\chapter{単純型付き $\lambda$ 計算の型推論}

\input{typeinfer-stlc}

\chapter{多相型の型推論}

\input{typeinfer-poly}

\end{document}

